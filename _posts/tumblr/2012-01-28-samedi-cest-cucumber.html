---
layout: post
title: Samedi c'est Cucumber
date: '2012-01-28T10:30:00+01:00'
tags:
- Test
tumblr_url: http://www.bonjourgem.com/post/16628308459/samedi-cest-cucumber
permalink: post/16628308459/samedi-cest-cucumber
---
<p class="img-post"><img src="/tumblr_files/tumblr_lyi5j8Ot7t1r58g99.gif"></p>
<h2>gem install cucumber</h2>
<p><strong>Le concombre magique</strong></p>
<p>Cucumber est l’outil pour écrire les spécifications d’une future application et pour générer vos tests. Celui- il permet d’écrire en full-text ce que vous voulez que votre application fasse.</p>
<p>Un petit exemple pour vous mettre l’eau à la bouche :</p>
<p><strong>Cucumber</strong></p>
<pre class="prettyprint linenums"><code>Fonctionnalité: Addition
  Afin de gagner du temps lors du calcul de la facture
  En tant que commerçant
  Je souhaite pouvoir faire une addition

  Plan du Scénario: Addition de deux nombres
    Soit une calculatrice
    Et que j'entre &lt;a&gt; pour le premier nombre
    Et que je tape sur la touche "+"
    Et que j'entre &lt;b&gt; pour le second nombre
    Lorsque je tape sur la touche "="
    Alors le résultat affiché doit être &lt;somme&gt;
</code></pre>
<p><strong>Avec le script Ruby (pleins d’expressions régulières)</strong> </p>
<pre class="prettyprint linenums"><code># encoding: utf-8
Soit /^une calculatrice$/ do
  @calc = Calculatrice.new
end

Etantdonné /^qu'on tape (.*)$/ do |n|
  @calc.push n.to_i
end

Etantdonné /^que j'entre (\d+) pour le (.*) nombre/ do |n, x|
  @calc.push n.to_i
end

Lorsque /^je tape sur la touche "="$/ do
  @expected_result = @calc.additionner
end

Lorsqu /on tape additionner/ do
  @expected_result = @calc.additionner
end

Alors /le résultat affiché doit être (\d*)/ do |result|
  result.to_i.should == @expected_result
end

Alors /le résultat doit être (\d*)/ do |result|
  result.to_i.should == @expected_result
end
</code></pre>
<p>Après on le lance avec un petit :</p>
<h2>cucumber monfichier.feature</h2>
<p>Et je vous laisse apprécier le résultat.</p>
<p><strong>Les liens utiles :</strong></p>
<ul class="link">
<li><a href="http://cukes.info/" title="Site officiel" target="_blank">Site officiel</a></li>
<li><a href="https://github.com/cucumber/cucumber" title="Github Cucumber" target="_blank">Github de Cucumber</a></li>
<li><a href="http://cuke4ninja.com/" title="The Secret Ninja Cucumber Scrolls" target="_blank">The Secret Ninja Cucumber Scrolls</a></li>
</ul>
